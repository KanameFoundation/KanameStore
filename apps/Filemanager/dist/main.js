!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Filemanager=t():e.Filemanager=t()}(self,()=>(()=>{"use strict";var e={};e.d=(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};return(()=>{var t,n={};function r(e,t){for(var n=[],r=[],o=arguments.length;o-- >2;)n.push(arguments[o]);for(;n.length;){var i=n.pop();if(i&&i.pop)for(o=i.length;o--;)n.push(i[o]);else null!=i&&!0!==i&&!1!==i&&r.push(i)}return"function"==typeof e?e(t||{},r):{nodeName:e,attributes:t||{},children:r,key:t&&t.key}}e.r(n),e.d(n,{en_EN:()=>o,fr_FR:()=>s,nb_NO:()=>a,pt_BR:()=>c,sv_SE:()=>i,tr_TR:()=>l,vi_VN:()=>u});var o={LBL_SHOW_HIDDEN_FILES:"Show hidden files",LBL_MINIMALISTIC:"Minimalistic",LBL_OPEN_WITH:"Open with...",LBL_SHOW_DATE:"Show date column",LBL_DIR_AND_FILE_STATUS:"{0}, {1}, {2} bytes total",LBL_DIR_OR_FILE_STATUS:"{0}, {1} bytes total",SINGLE_DIR:"directory",MULTI_DIR:"directories",SINGLE_FILE:"file",MULTI_FILE:"files",LBL_DATE:"Date",LBL_LOADING:"Loading {0}",DIALOG_MKDIR_MESSAGE:"Create new directory",DIALOG_MKDIR_PLACEHOLDER:"New directory",DIALOG_RENAME_MESSAGE:"Rename {0}?",DIALOG_DELETE_MESSAGE:"Delete {0} file(s)?",DIALOG_PROGRESS_MESSAGE:"Uploading {0}...",MSG_ERROR:"An error occurred",MSG_UPLOAD_ERROR:"Failed to upload file(s)",MSG_READDIR_ERROR:"An error occurred while reading directory: {0}",MSG_PASTE_ERROR:"Failed to paste file(s)",MSG_MKDIR_ERROR:"Failed to create directory",MSG_RENAME_ERROR:"Failed to rename",MSG_DELETE_ERROR:"Failed to delete"},i={LBL_SHOW_HIDDEN_FILES:"Visa d\xf6lda filer",LBL_MINIMALISTIC:"Minimalistic",LBL_OPEN_WITH:"\xd6ppna med...",LBL_SHOW_DATE:"Visa datumkolumn",LBL_DIR_AND_FILE_STATUS:"{0}, {1}, {2} byte totalt",LBL_DIR_OR_FILE_STATUS:"{0}, {1} byte totalt",SINGLE_DIR:"katalog",MULTI_DIR:"kataloger",SINGLE_FILE:"fil",MULTI_FILE:"filer",LBL_DATE:"Datum",LBL_LOADING:"Laddar {0}",DIALOG_MKDIR_MESSAGE:"Skapa ny katalog",DIALOG_MKDIR_PLACEHOLDER:"Ny katalog",DIALOG_RENAME_MESSAGE:"D\xf6p om {0}?",DIALOG_DELETE_MESSAGE:"Radera {0} fil(er)?",MSG_ERROR:"Ett fel uppstod",MSG_UPLOAD_ERROR:"Det gick inte att ladda upp filer(na)",MSG_READDIR_ERROR:"Ett fel uppstod n\xe4r katalogen l\xe4stes: {0}",MSG_PASTE_ERROR:"Det gick inte att klistra in fil(erna)",MSG_MKDIR_ERROR:"Det gick inte att skapa katalogen",MSG_RENAME_ERROR:"Det gick inte att byta namn",MSG_DELETE_ERROR:"Det gick inte att ta bort"},a={LBL_SHOW_HIDDEN_FILES:"Vis skjulte filer",LBL_MINIMALISTIC:"Minimalistisk",LBL_OPEN_WITH:"\xc5pne med...",LBL_SHOW_DATE:"Vis dato kolonne",LBL_DIR_AND_FILE_STATUS:"{0}, {1}, {2} bytes totalt",LBL_DIR_OR_FILE_STATUS:"{0}, {1} bytes totalt",SINGLE_DIR:"mappe",MULTI_DIR:"mapper",SINGLE_FILE:"fil",MULTI_FILE:"filer",LBL_DATE:"Dato",LBL_LOADING:"Laster {0}",DIALOG_MKDIR_MESSAGE:"Lag ny mappe",DIALOG_MKDIR_PLACEHOLDER:"Ny mappe",DIALOG_RENAME_MESSAGE:"Omd\xf8pe {0}?",DIALOG_DELETE_MESSAGE:"Slette {0} fil(er)?",MSG_ERROR:"En feil oppstod",MSG_UPLOAD_ERROR:"Feil under opplasting av fil(er)",MSG_READDIR_ERROR:"En feil oppstod under lesing av mappe: {0}",MSG_PASTE_ERROR:"Feil oppstod under liming av fil(er)",MSG_MKDIR_ERROR:"Feil oppstod under opprettelse av mappe",MSG_RENAME_ERROR:"Feil oppstod under omd\xf8ping",MSG_DELETE_ERROR:"Feil oppstod under sletting"},u={LBL_SHOW_HIDDEN_FILES:"Hiển thị tập tin ẩn",LBL_MINIMALISTIC:"Tối giản",LBL_OPEN_WITH:"Mở bằng...",LBL_SHOW_DATE:"Hiện cột thời gian",LBL_DIR_AND_FILE_STATUS:"{0}, {1}, tổng dung lượng {2} bytes",LBL_DIR_OR_FILE_STATUS:"{0}, tổng dung lượng {1} bytes",SINGLE_DIR:"thư mục",MULTI_DIR:"thư mục",SINGLE_FILE:"tập tin",MULTI_FILE:"c\xe1c tập tin",LBL_DATE:"Thời gian",LBL_LOADING:"Đang tải {0}",DIALOG_MKDIR_MESSAGE:"Tạo thư mục mới",DIALOG_MKDIR_PLACEHOLDER:"Thư mục mới",DIALOG_RENAME_MESSAGE:"Đổi t\xean {0}?",DIALOG_DELETE_MESSAGE:"Xo\xe1 {0} (c\xe1c) tập tin?",MSG_ERROR:"Đ\xe3 xảy ra lỗi",MSG_UPLOAD_ERROR:"Kh\xf4ng thể tải l\xean tập tin",MSG_READDIR_ERROR:"Đ\xe3 xảy ra lỗi trong khi đọc thư mục: {0}",MSG_PASTE_ERROR:"Kh\xf4ng thể d\xe1n tập tin",MSG_MKDIR_ERROR:"Kh\xf4ng thể tạo thư mục",MSG_RENAME_ERROR:"Kh\xf4ng thể đổi t\xean",MSG_DELETE_ERROR:"Kh\xf4ng thể x\xf3a"},c={LBL_SHOW_HIDDEN_FILES:"Mostrar arquivos ocultos",LBL_MINIMALISTIC:"Minimalista",LBL_OPEN_WITH:"Abrir com...",LBL_SHOW_DATE:"Mostrar coluna Data",LBL_DIR_AND_FILE_STATUS:"{0}, {1}, {2} bytes no total",LBL_DIR_OR_FILE_STATUS:"{0}, {1} bytes no total",SINGLE_DIR:"diret\xf3rio",MULTI_DIR:"diret\xf3rios",SINGLE_FILE:"arquivo",MULTI_FILE:"arquivos",LBL_DATE:"Data",LBL_LOADING:"Carregando {0}",DIALOG_MKDIR_MESSAGE:"Criar novo diret\xf3rio",DIALOG_MKDIR_PLACEHOLDER:"Novo diret\xf3rio",DIALOG_RENAME_MESSAGE:"Renomear {0}?",DIALOG_DELETE_MESSAGE:"Deletar {0} arquivo(s)?",MSG_ERROR:"Um erro ocorreu",MSG_UPLOAD_ERROR:"Falha ao fazer upload do(s) arquivo(s)",MSG_READDIR_ERROR:"Um erro ocorreu ao ler o diret\xf3rio: {0}",MSG_PASTE_ERROR:"Falha ao colar arquivo(s)",MSG_MKDIR_ERROR:"Falha ao criar diret\xf3rio",MSG_RENAME_ERROR:"Falha ao renomear",MSG_DELETE_ERROR:"Falha ao deletar"},s={LBL_SHOW_HIDDEN_FILES:"Afficher les fichiers cach\xe9s",LBL_MINIMALISTIC:"Minimaliste",LBL_OPEN_WITH:"Ouvrir avec...",LBL_SHOW_DATE:"Affichier la colonne date",LBL_DIR_AND_FILE_STATUS:"{0}, {1}, {2} bytes au total",LBL_DIR_OR_FILE_STATUS:"{0}, {1} bytes au total",SINGLE_DIR:"dossier",MULTI_DIR:"dossiers",SINGLE_FILE:"dossier",MULTI_FILE:"des dossiers",LBL_DATE:"Date",LBL_LOADING:"Chargement en cours {0}",DIALOG_MKDIR_MESSAGE:"Cr\xe9er nouveau dossier",DIALOG_MKDIR_PLACEHOLDER:"Nouveau dossier",DIALOG_RENAME_MESSAGE:"Renommer {0}?",DIALOG_DELETE_MESSAGE:"Supprimer {0} (des) dossiers?",MSG_ERROR:"Une erreur est survenue",MSG_UPLOAD_ERROR:"Echec du chargement du(des) fichier(s)",MSG_READDIR_ERROR:"Une erreur est survenue lors de la lecture du r\xe9pertoire : {0}",MSG_PASTE_ERROR:"Impossible de coller le(s) file(s)",MSG_MKDIR_ERROR:"Impossible de cr\xe9er le r\xe9pertoire",MSG_RENAME_ERROR:"Echec du renommage",MSG_DELETE_ERROR:"Echec de la suppression"},l={LBL_SHOW_HIDDEN_FILES:"Gizli dosyaları g\xf6ster",LBL_MINIMALISTIC:"Minimalist",LBL_OPEN_WITH:"Şununla a\xe7:",LBL_SHOW_DATE:"Tarih s\xfctununu g\xf6ster",LBL_DIR_AND_FILE_STATUS:"toplamda {0}, {1}, {2} byte var",LBL_DIR_OR_FILE_STATUS:"toplamda {0}, {1} byte var",SINGLE_DIR:"dizin",MULTI_DIR:"dizinler",SINGLE_FILE:"dosya",MULTI_FILE:"dosyalar",LBL_DATE:"Tarih",LBL_LOADING:"Y\xfckleniyor {0}",DIALOG_MKDIR_MESSAGE:"Yeni dizin oluştur",DIALOG_MKDIR_PLACEHOLDER:"Yeni dizin",DIALOG_RENAME_MESSAGE:"{0} ismi değişsin mi?",DIALOG_DELETE_MESSAGE:"{0} dosya(lar) silinsin mi?",MSG_ERROR:"Bir hata oldu",MSG_UPLOAD_ERROR:"Dosya(lar)ın y\xfcklenmesi işlemi başarısız",MSG_READDIR_ERROR:"Belirtilen dizin okunurken bir hata oluştu: {0}",MSG_PASTE_ERROR:"Dosya(lar)ın yapıştırılması işlemi başarısız",MSG_MKDIR_ERROR:"Dizin oluşturma işlemi başarısız",MSG_RENAME_ERROR:"Yeniden adlandırma işlemi başarısız",MSG_DELETE_ERROR:"Silme işlemi başarısız"};function f(e,t){return null!=t&&"u">typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function d(e){return e&&"u">typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function p(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function m(e,t){return e(t={exports:{}},t.exports),t.exports}var h=m(function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0});p(h);var v=m(function(e){e.exports=function(e){if(Array.isArray(e))return h(e)},e.exports.default=e.exports,e.exports.__esModule=!0});p(v);var g=m(function(e){e.exports=function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0});p(g);var _=m(function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0});p(_);var y=m(function(e){e.exports=function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0});p(y);var L=p(m(function(e){e.exports=function(e){return v(e)||g(e)||_(e)||y()},e.exports.default=e.exports,e.exports.__esModule=!0}));function E(e,t){for(var n=[],r=[],o=arguments.length;2<o--;)n.push(arguments[o]);for(;n.length;){var i=n.pop();if(i&&i.pop)for(o=i.length;o--;)n.push(i[o]);else null!=i&&!0!==i&&!1!==i&&r.push(i)}return"function"==typeof e?e(t||{},r):{nodeName:e,attributes:t||{},children:r,key:t&&t.key}}function R(e,t,n,r){function o(e){return"function"==typeof e?o(e(y,L)):null==e?"":e}function i(){p=!p;var e=o(n);for(r&&!p&&(h=function e(t,n,r,i,a){if(i===r);else if(null==r||r.nodeName!==i.nodeName){var c=function e(t,n){var r="string"==typeof t||"number"==typeof t?document.createTextNode(t):(n=n||"svg"===t.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName),i=t.attributes;if(i){i.oncreate&&g.push(function(){i.oncreate(r)});for(var a=0;a<t.children.length;a++)r.appendChild(e(t.children[a]=o(t.children[a]),n));for(var u in i)f(r,u,i[u],null,n)}return r}(i,a);t.insertBefore(c,n),null!=r&&d(t,n,r),n=c}else if(null==r.nodeName)n.nodeValue=i;else{!function(e,t,n,r){for(var o in u(t,n))n[o]!==("value"==o||"checked"===o?e[o]:t[o])&&f(e,o,n[o],t[o],r);var i=_?n.oncreate:n.onupdate;i&&g.push(function(){i(e,t)})}(n,r.attributes,i.attributes,a=a||"svg"===i.nodeName);for(var l={},p={},m=[],h=r.children,v=i.children,y=0;y<h.length;y++){m[y]=n.childNodes[y];var L=s(h[y]);null!=L&&(l[L]=[m[y],h[y]])}for(var y=0,E=0;E<v.length;){var L=s(h[y]),R=s(v[E]=o(v[E]));if(p[L]){y++;continue}if(null!=R&&R===s(h[y+1])){null==L&&d(n,m[y],h[y]),y++;continue}if(null==R||_)null==L&&(e(n,m[y],h[y],v[E],a),E++),y++;else{var b=l[R]||[];L===R?(e(n,b[0],b[1],v[E],a),y++):b[0]?e(n,n.insertBefore(b[0],m[y]),b[1],v[E],a):e(n,m[y],null,v[E],a),p[R]=v[E],E++}}for(;y<h.length;)null==s(h[y])&&d(n,m[y],h[y]),y++;for(var y in l)p[y]||d(n,l[y][0],l[y][1])}return n}(r,h,v,v=e)),_=!1;g.length;)g.pop()()}function a(){p||(p=!0,setTimeout(i))}function u(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function c(e,t){for(var n=0;n<e.length;)t=t[e[n++]];return t}function s(e){return e?e.key:null}function l(e){return e.currentTarget.events[e.type](e)}function f(e,t,n,r,o){if("key"===t);else if("style"!==t)"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?r||(r=e.events[t]):e.events={},e.events[t]=n,n?r||e.addEventListener(t,l):e.removeEventListener(t,l)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!o?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),(null==n||!1===n)&&e.removeAttribute(t);else if("string"==typeof n)e.style.cssText=n;else for(var i in"string"==typeof r&&(r=e.style.cssText=""),u(r,n)){var a=null==n||null==n[i]?"":n[i];"-"===i[0]?e.style.setProperty(i,a):e.style[i]=a}}function d(e,t,n){function r(){e.removeChild(function e(t,n){var r=n.attributes;if(r){for(var o=0;o<n.children.length;o++)e(t.childNodes[o],n.children[o]);r.ondestroy&&r.ondestroy(t)}return t}(t,n))}var o=n.attributes&&n.attributes.onremove;o?o(t,r):r()}var p,m=[].map,h=r&&r.children[0]||null,v=h&&function e(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:m.call(t.childNodes,function(t){return 3===t.nodeType?t.nodeValue:e(t)})}}(h),g=[],_=!0,y=u(e),L=function e(t,n,r){for(var o in r)"function"==typeof r[o]?function(e,o){r[e]=function(e){var i=o(e);return"function"==typeof i&&(i=i(c(t,y),r)),i&&i!==(n=c(t,y))&&!i.then&&a(y=function e(t,n,r){var o={};return t.length?(o[t[0]]=1<t.length?e(t.slice(1),n,r[t[0]]):n,u(r,o)):n}(t,u(n,i),y)),i}}(o,r[o]):e(t.concat(o),n[o]=u(n[o]),r[o]=u(r[o]));return r}([],y,u(t));return a(),L}var b=function(e,t){return"number"==typeof e?"".concat(e,"px"):!1===e?t:e},S={grow:function(e){return{flexGrow:e}},shrink:function(e){return{flexShrink:e}},basis:function(e){return{flexBasis:b(e,"auto")}},align:function(e){return{alignItems:e}},justify:function(e){return{justifyContent:e}},padding:function(e){return{margin:b(e,"0")}},margin:function(e){return{margin:b(e,"0")}}},I=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=["osjs-gui"].concat(L(f(e.class,Array)?e.class:[e.class]));e.orientation&&n.push("osjs-gui-"+e.orientation);var r="string"==typeof e.style?{}:Object.assign({},e.style||{}),o=Object.keys(e).reduce(function(t,n){return Object.assign({},t,S[n]?S[n](e[n]):void 0)},r);return E("div",{oncreate:e.oncreate,ondestroy:e.ondestroy,class:n.filter(function(e){return!!e}).join(" "),style:o},t)},D=function(e,t){return E(I,Object.assign({orientation:"horizontal"},e,{class:["osjs-gui-box",e.class]}),t)},O=p(m(function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),A=function(e){var t=e&&"object"===O(e)?e.src:e;return E("i",{"data-icon":e&&"object"===O(e)?e.name:void 0,class:"osjs-icon",style:{backgroundImage:"string"==typeof e?"url(".concat(t,")"):void 0}})},x=p(m(function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0})),M=function(e,t){return Object.keys(e).filter(function(e){return -1===t.indexOf(e)}).reduce(function(t,n){return Object.assign(x({},n,e[n]),t)},{})},k=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:250,n=!1;return function(r,o){return(e=clearTimeout(e),e=setTimeout(function(){return n=!1},t),n)?(r.preventDefault(),o(r)):(n=!0,!1)}},w=function(e,t,n,r,o){var i=t.oninput||function(){},a=t.onchange||function(){},u=t.onkeydown||function(){},c=o||function(e){return[e.target.value]},s=Object.assign({oninput:function(e){return i.apply(void 0,[e].concat(L(c(e))))},onchange:function(e){return a.apply(void 0,[e].concat(L(c(e))))},onkeydown:function(e){13===e.keyCode&&t.onenter&&t.onenter.apply(t,[e].concat(L(c(e)))),u(e)}},n,M(t,["choices","label","box","oninput","onchange"]));return E(I,Object.assign({},t.box||{},{class:"osjs-gui-field osjs-gui-"+e}),r(s))},T=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return w("button",e,{},function(n){var r=[];return e.icon&&r.push(E(A,e.icon)),"string"==typeof e.label&&r.push(E("span",{class:"osjs-label"},e.label)),E("button",n,[].concat(r,L(t)))})},G=function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=function(e){var t=[];return"checkbox"===e.type||"boolean"==typeof e.checked?t.push(E("span",{class:"osjs-gui-menu-checkbox "+(e.checked?"active":"")})):e.icon&&t.push(E(A,e.icon)),t.push(E("span",{},e.label)),t},i=function(t,n){if("function"==typeof n.element)return n.element();var i=[E("span",{class:"separator"===n.type?"osjs-gui-menu-separator":"osjs-gui-menu-label "+(n.disabled?"osjs__disabled":"")},o(n))];return n.items&&i.push(e(t,n.items,r+1)),i};return E("ul",{class:""},n.map(function(e){return E("li",{class:"osjs-gui-menu-entry"},[E("div",{class:"osjs-gui-menu-container","data-has-image":!!e.icon||void 0,"data-has-children":!!e.items||void 0,onmouseover:e.items?t.onshow:void 0,ontouchend:e.items?t.onshow:void 0,onclick:function(n){e.items||(e.onclick&&e.onclick(e,n),t.onclick&&t.onclick(e,n,e))}},i(t,e))])}))},j=function(e){return E("div",{id:"osjs-context-menu",className:"osjs-gui osjs-gui-menu",oncreate:e.oncreate,onupdate:e.onupdate,style:{display:!1===e.visible?"none":"block",top:e.position?e.position.top+"px":0,left:e.position?e.position.left+"px":0}},G(e,e.menu))},N=function(e,t){return E(I,Object.assign({orientation:"vertical"},e,{class:["osjs-gui-toolbar",e.class]}),t)},B=function(e,t){return E(I,Object.assign({},e.box||{},{class:["osjs-gui-statusbar",e.class]}),t)},P=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=e.onclick,r=e.data;return E("div",{onclick:function(e){if("function"==typeof n){var t=e.target.parentNode,o=Array.prototype.indexOf.call(t.children,e.target);n(e,r||{},o)}}},E("span",{},t))},F=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return E(I,Object.assign({},e,{class:["osjs-gui-menubar",e.class]}),[].concat(L((e.items||[]).map(function(t){return E(P,{data:t.data,onclick:t.onclick||e.onclick},t.label)})),L(t)))};function H(e,t,n,r){return t._$r=function(){return{}},function(o,i){return E(r||"x-",{key:o.key,id:o.id,class:o.class,oncreate:function(r){var a=R(e,t,function(e,t){var o=n(e,t);return"function"==typeof o&&(o=o(r._$p,r._$c)),o},r);r._$p=o,r._$c=i,r._$r=a._$r,r._$u=a.uninit,a.init&&a.init(o),o.oncreate&&o.oncreate(r)},onupdate:function(e){e._$p=o,e._$c=i,e._$r(),o.onupdate&&o.onupdate(e)},ondestroy:function(e){e._$u&&e._$u()},onremove:function(e,t){return o.onremove?void o.onremove(e,t):t()}})}}var U=function(e,t,n){var r=Math.min,o=e.target,i=e.clientX,a=e.clientY,u=o.previousSibling,c=u.offsetWidth,s=u.offsetHeight,l=Array.from(o.parentNode.children).indexOf(u),f=.8*u.parentNode.offsetWidth,d=.8*u.parentNode.offsetHeight;if(!(0>l)){var p=function(e){e.preventDefault();var o="vertical"===n?c:s;o="vertical"===n?r(f,o+(e.clientX-i)):r(d,o+(e.clientY-a)),t.setSize({index:l,size:o})};e.preventDefault(),document.addEventListener("mousemove",p),document.addEventListener("mouseup",function e(t){t.preventDefault(),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",e)})}},C=function(e,t,n,r){var o=Array(Math.ceil(n.length/2)).fill(null).map(function(){return E("div",{class:"osjs-gui-panes-spacer",onmousedown:function(e){return U(e,t,r)}})});return n.map(function(t,n){var r=e.sizes[n]?e.sizes[n]+"px":void 0;return E("div",{class:"osjs-gui-panes-pane",style:{flex:r?"0 0 ".concat(r):r}},t)}).map(function(e,t){return[e,o[t]]}).reduce(function(e,t){return e.concat(t)}).filter(function(e){return void 0!==e})},W=H({sizes:[]},{init:function(e){return{sizes:e.sizes||[150]}},setSize:function(e){var t=e.index,n=e.size;return function(e){var r=[].concat(e.sizes);return r[t]=n,{sizes:r}}}},function(e,t){return function(n,r){var o=n.orientation||"vertical";return E(I,{orientation:o,class:"osjs-gui-panes-inner"},C(e,t,r,o))}},"div"),z=function(e,t){return E(W,{class:"osjs-gui-panes"},t)},K=k(),$=function(e){var t,n=function(t,n){return E("div",{class:"osjs-gui-list-view-pane",style:n.style||{}},[E("div",{class:"osjs-gui-list-view-header",style:{display:e.hideColumns?"none":void 0}},E("span",{},"object"===O(n)?n.label:n)),E("div",{class:"rows","data-zebra":e.zebra+""},e.rows.map(function(n,r){var o=n.columns[t]||{},i=e.selectedIndex===r,a=o.icon?E(A,o.icon):null,u=[E("span",{},["object"===O(o)?o.label:o])];return a&&u.unshift(a),E("div",{key:n.key,"data-has-icon":!!o.icon||void 0,class:"osjs-gui-list-view-cell"+(i?" osjs__active":""),ontouchstart:function(t){return K(t,function(){return e.onactivate({data:n.data,index:r,ev:t})})},ondblclick:function(t){return e.onactivate({data:n.data,index:r,ev:t})},onclick:function(t){return e.onselect({data:n.data,index:r,ev:t})},oncontextmenu:function(t){return e.oncontextmenu({data:n.data,index:r,ev:t})},oncreate:function(t){return e.oncreate({data:n.data,index:r,el:t})}},u)}))])};return E("div",{class:"osjs-gui-list-view-wrapper",onscroll:function(n){t=clearTimeout(t),t=setTimeout(function(){e.onscroll(n)},100)},oncreate:function(t){return t.scrollTop=e.scrollTop},onupdate:function(t){0>e.selectedIndex&&(t.scrollTop=e.scrollTop)}},e.columns.map(function(e,t){return n(t,e)}))},Y=function(e,t){var n=Object.assign({zebra:!0,columns:[],rows:[],onselect:function(e){var n=e.data,r=e.index,o=e.ev;t.select({data:n,index:r,ev:o}),t.setSelectedIndex(r)},onactivate:function(e){var n=e.data,r=e.index,o=e.ev;t.activate({data:n,index:r,ev:o}),t.setSelectedIndex(-1)},oncontextmenu:function(e){var n=e.data,r=e.index,o=e.ev;t.select({data:n,index:r,ev:o}),t.contextmenu({data:n,index:r,ev:o}),t.setSelectedIndex(r)},oncreate:function(e){t.created(e)},onscroll:function(e){t.scroll(e)}},e);return function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return E(I,Object.assign({class:"osjs-gui-list-view"},(e=Object.assign(n,t)).box||{}),$(M(e,["box"])))}},q=function(e){return Object.assign({selectedIndex:-1,scrollTop:0},e)},V=function(e){return Object.assign({select:function(){return function(){return{}}},activate:function(){return function(){return{}}},contextmenu:function(){return function(){return{}}},created:function(){return function(){return{}}},scroll:function(){return function(e){return e}},setRows:function(e){return{rows:e}},setColumns:function(e){return{columns:e}},setScrollTop:function(e){return function(){return{scrollTop:e}}},setSelectedIndex:function(e){return function(){return{selectedIndex:e}}}},e||{})},X=(k(),function(e,t,n){var r=e.labels,o=e.onchange,i=e.oncontextmenu;return(r||[]).map(function(e,r){return E("div",{class:t.selectedIndex===r?"osjs__active":"",oncontextmenu:function(t){(i||function(){})(t,r,e)},onclick:function(t){n.setSelectedIndex(r),(o||function(){})(t,r,e)}},E("span",{},e))})}),J=(H({selectedIndex:0},{init:function(e){return{selectedIndex:e.selectedIndex||0}},setSelectedIndex:function(e){return function(){return{selectedIndex:e}}}},function(e,t){return function(n,r){return E("div",{class:"osjs-gui-tabs-wrapper"},[E("div",{class:"osjs-gui-tabs-header"},X(n,e,t)),E("div",{class:"osjs-gui-tabs-panes"},r.map(function(t,n){return E("div",{class:e.selectedIndex===n?"osjs__active":""},t)}))])}},"div"),function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return w("text-field",e,{autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",type:"text"},function(e){return E("input",e)})}),Q=p((H({active:!0},{init:function(e){return{ative:!1!==e.active}},ontoggle:function(e){var t=e.ev,n=e.active;return(e.ontoggle||function(){})(t,n),{active:n}}},function(e,t){return function(n,r){return E(I,Object.assign({},n.box||{},{class:["osjs-gui-expander-wrapper"]}),[E("div",{class:"osjs-gui-expander-header",onclick:function(r){return t.ontoggle({ev:r,active:!e.active,ontoggle:n.ontoggle})}},[E("div",{class:"osjs-gui-expander-header-icon","data-active":e.active+""}),E("div",{class:"osjs-gui-expander-header-label"},n.label)]),E("div",{class:"osjs-gui-expander-content",style:{display:!1===e.active?"none":void 0}},r)])}},"div"),m(function(e){function t(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise(function(o,i){function a(e){t(c,o,i,a,u,"next",e)}function u(e){t(c,o,i,a,u,"throw",e)}var c=e.apply(n,r);a(void 0)})}},e.exports.default=e.exports,e.exports.__esModule=!0}))),Z=p(m(function(e){e.exports=function(e,t){if(!f(e,t))throw TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0})),ee=p(m(function(e){function t(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0})),et=m(function(e){var t=function(e){function t(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function n(e,t,n,i){var a,u,c,s,l=Object.create((t&&f(t.prototype,o)?t:o).prototype);return a=e,u=n,c=new p(i||[]),s="suspendedStart",l._invoke=function(e,t){if("executing"===s)throw Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return h()}for(c.method=e,c.arg=t;;){var n=c.delegate;if(n){var o=function e(t,n){var o=t.iterator[n.method];if(o===v){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=v,e(t,n),"throw"===n.method))return b;n.method="throw",n.arg=TypeError("The iterator does not provide a 'throw' method")}return b}var i=r(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=v),n.delegate=null,b):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,b)}(n,c);if(o){if(o===b)continue;return o}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if("suspendedStart"===s)throw s="completed",c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);s="executing";var i=r(a,u,c);if("normal"===i.type){if(s=c.done?"completed":"suspendedYield",i.arg===b)continue;return{value:i.arg,done:c.done}}"throw"===i.type&&(s="completed",c.method="throw",c.arg=i.arg)}},l}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function o(){}function i(){}function a(){}function u(e){["next","throw","return"].forEach(function(n){t(e,n,function(e){return this._invoke(n,e)})})}function c(e,t){var n;this._invoke=function(o,i){function a(){return new t(function(n,a){!function n(o,i,a,u){var c=r(e[o],e,i);if("throw"===c.type)u(c.arg);else{var s=c.arg,l=s.value;return l&&"object"==(void 0===l?"undefined":d(l))&&_.call(l,"__await")?t.resolve(l.__await).then(function(e){n("next",e,a,u)},function(e){n("throw",e,a,u)}):t.resolve(l).then(function(e){s.value=e,a(s)},function(e){return n("throw",e,a,u)})}}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function m(e){if(e){var t=e[L];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(_.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t};return r.next=r}}return{next:h}}function h(){return{value:v,done:!0}}var v,g=Object.prototype,_=g.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},L=y.iterator||"@@iterator",E=y.asyncIterator||"@@asyncIterator",R=y.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(e,t,n){return e[t]=n}}e.wrap=n;var b={},S={};t(S,L,function(){return this});var I=Object.getPrototypeOf,D=I&&I(I(m([])));D&&D!==g&&_.call(D,L)&&(S=D);var O=a.prototype=o.prototype=Object.create(S);return i.prototype=a,t(O,"constructor",a),t(a,"constructor",i),i.displayName=t(a,R,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,R,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},u(c.prototype),t(c.prototype,E,function(){return this}),e.AsyncIterator=c,e.async=function(t,r,o,i,a){void 0===a&&(a=Promise);var u=new c(n(t,r,o,i),a);return e.isGeneratorFunction(r)?u:u.next().then(function(e){return e.done?e.value:u.next()})},u(O),t(O,R,"Generator"),t(O,L,function(){return this}),t(O,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=m,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&_.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=_.call(o,"catchLoc"),u=_.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else if(u){if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else throw Error("try statement without catch or finally")}}},abrupt:function(e,t){for(var n,r=this.tryEntries.length-1;0<=r;--r)if((n=this.tryEntries[r]).tryLoc<=this.prev&&_.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t,n=this.tryEntries.length-1;0<=n;--n)if((t=this.tryEntries[n]).finallyLoc===e)return this.complete(t.completion,t.afterLoc),l(t),b},catch:function(e){for(var t,n=this.tryEntries.length-1;0<=n;--n)if((t=this.tryEntries[n]).tryLoc===e){var r=t.completion;if("throw"===r.type){var o=r.arg;l(t)}return o}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:m(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=v),b}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==("u"<typeof globalThis?"undefined":d(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}),en=function(e,t){var n=t.target.querySelector("ul");n&&(n.classList.contains("osjs-gui-menu-container")&&(n=n.parentNode.parentNode),n&&n.offsetParent)&&(n.classList.remove("clamp-right"),n.getBoundingClientRect().right>e.offsetWidth&&n.classList.add("clamp-right"))},er=function(e,t,n){var r={},o=n.top+t.offsetHeight,i=n.left+t.offsetWidth,a=e.offsetHeight-n.top,u=e.offsetWidth-n.left,c=i>e.offsetWidth,s=o>e.offsetHeight;return s&&e.offsetHeight>t.offsetHeight&&(r.top=e.offsetHeight-t.offsetHeight-a),c&&(r.left=e.offsetWidth-t.offsetWidth-u),s||c?r:null},eo=function(e){return e(),setTimeout(e,100)},ei=function(){function e(t){Z(this,e),this.core=t,this.callback=function(){},this.actions=null,this.$element=document.createElement("div")}return ee(e,[{key:"destroy",value:function(){this.callback=null,this.actions=null}},{key:"init",value:function(){var e,t,n=this;this.$element.className="osjs-system-context-menu",this.core.$root.appendChild(this.$element);var r=!1;this.actions=R({visible:!1,menu:[],position:{top:0,left:0}},{clamp:function(e){return function(r){if(e=e||document.querySelector("#osjs-context-menu"),clearTimeout(t),e){var o=er(n.core.$root,e,r.position);if(o)return{position:o}}return{}}},onshow:function(e){return function(){t=eo(function(){return en(n.core.$root,e)})}},show:function(e){return function(t,o){var i=e.menu,a=e.position;if(e.toggle&&r)return o.hide();if(f(a,Event))a={left:a.clientX,top:a.clientY};else if(f(a,Element)){var u=a.getBoundingClientRect();a={left:u.left,top:u.top+u.height}}return n.callback=function(t,n,r){e.callback&&e.callback(t,n),!1!==r.closeable&&o.hide()},r=!0,n.onclose=e.onclose,eo(function(){return o.clamp()}),{visible:!0,menu:i||[],position:a||{top:0,left:0}}}},hide:function(){return function(){return r&&setTimeout(function(){return r=!1},0),n.onclose&&n.onclose(),n.onclose=null,n.callback=null,{visible:!1}}}},(e=function(){!n.core.destroyed&&n.callback&&n.callback.apply(n,arguments)},function(t,n){return E(j,{position:t.position,visible:t.visible,menu:t.menu,onclick:e,onshow:n.onshow})}),this.$element)}},{key:"show",value:function(){var e;return this.actions?(e=this.actions).show.apply(e,arguments):null}},{key:"hide",value:function(){var e;return this.actions?(e=this.actions).hide.apply(e,arguments):null}}]),e}(),ea=function(e){var t=e.target,n="TEXTAREA"===t.tagName;return n||"INPUT"!==t.tagName||(n=-1!==["text","password","number","email"].indexOf(t.type)),n};function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ec(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,o)}function es(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){ec(i,r,o,a,u,"next",e)}function u(e){ec(i,r,o,a,u,"throw",e)}a(void 0)})}}function el(e){return function(e){if(Array.isArray(e))return eu(e)}(e)||function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return eu(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eu(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ef(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype),u=Object.defineProperty;return u(a,"next",{value:c(0)}),u(a,"throw",{value:c(1)}),u(a,"return",{value:c(2)}),"function"==typeof Symbol&&u(a,Symbol.iterator,{value:function(){return this}}),a;function c(u){return function(c){var s=[u,c];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}}ee(function e(t){Z(this,e),this.core=t,this.contextmenu=new ei(t)},[{key:"destroy",value:function(){var e=document.getElementById("osjs-context-menu");e&&e.remove(),this.contextmenu.destroy()}},{key:"init",value:(t=Q(et.mark(function e(){var t,n=this;return et.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={show:function(){var e;return(e=n.contextmenu).show.apply(e,arguments)},hide:function(){var e;return(e=n.contextmenu).hide.apply(e,arguments)}},this.core.instance("osjs/contextmenu",function(){return arguments.length?t.show.apply(t,arguments):t}),this.core.$root.addEventListener("contextmenu",function(e){ea(e)||(e.stopPropagation(),e.preventDefault())});case 3:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"start",value:function(){var e=this,t=function(t){var n=document.getElementById("osjs-context-menu");!(n&&n.contains(t.target))&&e.contextmenu&&e.contextmenu.hide()};this.core.$root.addEventListener("click",t,!0),this.core.once("destroy",function(){e.core.$root.removeEventListener("click",t,!0)}),this.contextmenu.init()}}]);var ed=function(e){return function(t,n){-1!==["yes","ok"].indexOf(t)&&e(n)}},ep=function(e){var t=document.createElement("input");t.type="file",t.onchange=function(){t.files.length>0&&e(t.files)},t.click()},em=function(e){return -1!==["..","."].indexOf(e)},eh=function(e,t){var n={path:e.config("vfs.defaultPath","home:/")},r=t.args.path?Object.assign({},n,t.args.path):n;return{homePath:n,initialPath:r}},ev=function(e,t){var r=(0,e.make("osjs/locale").translatable)(n);return function(e,t){var n=t.filter(function(e){return e.isDirectory}).length,o=t.filter(function(e){return!e.isDirectory}).length,i=t.reduce(function(e,t){return e+(t.size||0)},0),a="".concat(n," ").concat(r(1===n?"SINGLE_DIR":"MULTI_DIR")),u="".concat(o," ").concat(r(1===o?"SINGLE_FILE":"MULTI_FILE"));return n>0&&o>0?r("LBL_DIR_AND_FILE_STATUS",a,u,i):n>0?r("LBL_DIR_OR_FILE_STATUS",a,i):r("LBL_DIR_OR_FILE_STATUS",u,i)}},eg=function(e){var t=e.make("osjs/fs");return function(){return t.mountpoints(!0).map(function(e){return{columns:[{icon:e.icon,label:e.label}],data:e}})}},e_=function(e,t){var r=e.make("osjs/locale"),o=r.translate,i=(0,r.translatable)(n);return function(){var e=[{label:o("LBL_NAME"),style:{minWidth:"20em"}}];return t.settings.showDate&&e.push({label:i("LBL_DATE")}),el(e).concat([{label:o("LBL_TYPE"),style:{maxWidth:"150px"}},{label:o("LBL_SIZE"),style:{flex:"0 0 7em",textAlign:"right"}}])}},ey=function(e,t){var n=e.make("osjs/fs"),r=e.make("osjs/locale").format,o=function(e){if(e.stat){var t=e.stat.mtime||e.stat.ctime;if(t)try{var n=new Date(t);return"".concat(r(n,"shortDate")," ").concat(r(n,"shortTime"))}catch(e){return t}}return""};return function(e){return e.map(function(e){var r=[{label:e.filename,icon:e.icon||n.icon(e)}];return t.settings.showDate&&r.push(o(e)),{key:e.path,data:e,columns:el(r).concat([e.mime,e.humanSize])}})}},eL=function(e,t,r,o,i){var a,u,c=e.make("osjs/vfs"),s=e.make("osjs/fs").pathJoin,l=(0,e.make("osjs/locale").translatable)(n),f=function(e){r.emit("filemanager:navigate",i.currentPath,void 0,e)},d=function(e,t,n){return es(function(){var i;return ef(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,3,4]),r.setState("loading",!0),[4,e()];case 1:return i=a.sent(),f(t),[2,i];case 2:return o("error",a.sent(),n||l("MSG_ERROR")),[3,4];case 3:return r.setState("loading",!1),[7];case 4:return[2,[]]}})})()},p=function(e){var n=o("progress",e);return c.writefile({path:s(i.currentPath.path,e.name)},e,{pid:t.pid,onProgress:function(e,t){return n.setProgress(t)}}).then(function(e){return n.destroy(),e}).catch(function(e){throw n.destroy(),e})},m=(a=function(e){Promise.all(e.map(p)).then(function(){return f(e[0].name)}).catch(function(e){return o("error",e,l("MSG_UPLOAD_ERROR"))})},u=function(e){var n={path:s(i.currentPath.path,e.filename)};n.path!==e.path&&d(function(){return c.copy(e,n,{pid:t.pid})},!0,l("MSG_UPLOAD_ERROR"))},function(e,t,n){n.length?a(n):t&&t.path&&t.filename&&u(t)});return{download:function(e){return e.forEach(function(e){return c.download(e)})},upload:function(){return ep(function(e){p(e[0]).then(function(){return f(e[0].name)}).catch(function(e){return o("error",e,l("MSG_UPLOAD_ERROR"))})})},refresh:f,action:d,drop:m,readdir:function(e,n,a){return es(function(){var u,s,f;return ef(this,function(d){switch(d.label){case 0:if(r.getState("loading"))return[2];Array.isArray(e)&&(e=e[0]),d.label=1;case 1:return d.trys.push([1,3,4,5]),u=l("LBL_LOADING",e.path),s={showHiddenFiles:t.settings.showHiddenFiles},r.setState("loading",!0),r.emit("filemanager:status",u),[4,c.readdir(e,s)];case 2:return f=d.sent(),t.args.path=e,i.currentPath=e,void 0===n||!1===n?r.emit("filemanager:historyPush",e):"clear"===n&&r.emit("filemanager:historyClear"),r.emit("filemanager:readdir",{list:f,path:e.path,selectFile:a}),r.emit("filemanager:title",e.path),[3,5];case 3:return o("error",d.sent(),l("MSG_READDIR_ERROR",e.path)),[3,5];case 4:return i.currentFile=[],r.setState("loading",!1),[7];case 5:return[2]}})})()},paste:function(e,n){return function(r){var i=r.items,a=r.callback;return Promise.all(i.map(function(r){var o={path:s(n.path,r.filename)};return e?c.move(r,o,{pid:t.pid}):c.copy(r,o,{pid:t.pid})})).then(function(e){return f(!0),"function"==typeof a&&a(),e}).catch(function(e){return o("error",e,l("MSG_PASTE_ERROR"))})}}}},eE=function(e,t,n){var r=e.make("osjs/clipboard");return{set:function(e){return r.set({items:e},"filemanager:copy")},cut:function(t){return r.set({items:t,callback:function(){return e.config("vfs.watch")?void 0:n.refresh(!0)}},"filemanager:move")},paste:function(){if(r.has(/^filemanager:/)){var e=r.has("filemanager:move");r.get(e).then(n.paste(e,t.currentPath))}}}},eR=function(e,t,r){var o=e.make("osjs/vfs"),i=e.make("osjs/fs").pathJoin,a=(0,e.make("osjs/locale").translatable)(n),u=function(t,n,o){var i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return e.make("osjs/dialog",t,n,{parent:r,attributes:{modal:i}},o)},c={mkdir:function(e,n){return u("prompt",{message:a("DIALOG_MKDIR_MESSAGE"),value:a("DIALOG_MKDIR_PLACEHOLDER")},ed(function(r){var u=i(n.path,r);e(function(){return o.mkdir({path:u},{pid:t.pid})},r,a("MSG_MKDIR_ERROR"))}))},rename:function(e,t){return t.forEach(function(t){return u("prompt",{message:a("DIALOG_RENAME_MESSAGE",t.filename),value:t.filename},ed(function(n){var r=t.path.lastIndexOf(t.filename),i=t.path.substr(0,r)+n;e(function(){return o.rename(t,{path:i})},n,a("MSG_RENAME_ERROR"))}))})},delete:function(e,n){return u("confirm",{message:a("DIALOG_DELETE_MESSAGE",n.length)},ed(function(){e(function(){return Promise.all(n.map(function(e){return o.unlink(e,{pid:t.pid})}))},!0,a("MSG_DELETE_ERROR"))}))},progress:function(e){return u("progress",{message:a("DIALOG_PROGRESS_MESSAGE",e.name),buttons:[]},function(){},!1)},error:function(e,t){return u("alert",{type:"error",error:e,message:t},function(){})}};return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(c[e])return c[e].apply(c,el(n));throw Error("Invalid dialog: ".concat(e))}},eb=function(e,t,r){var o=e.make("osjs/fs"),i=e.make("osjs/clipboard"),a=e.make("osjs/contextmenu"),u=e.make("osjs/locale"),c=u.translate,s=(0,u.translatable)(n),l={file:function(){return[{label:c("LBL_UPLOAD"),onclick:function(){return r.emit("filemanager:menu:upload")}},{label:c("LBL_MKDIR"),onclick:function(){return r.emit("filemanager:menu:mkdir")}},{label:c("LBL_QUIT"),onclick:function(){return r.emit("filemanager:menu:quit")}}]},edit:function(t,n){return es(function(){var o,a,u,l,f,d,p,m;return ef(this,function(h){switch(h.label){case 0:var v;if(o=function(e){return r.emit(e,t)},a=t[t.length-1],1===t.length&&a&&em(a.filename))return[2,[{label:c("LBL_GO"),onclick:function(){return o("filemanager:navigate")}}]];return u=t.some(function(e){return!e.isDirectory&&!em(e.filename)}),l=t.some(function(e){return!em(e.filename)}),f=1===t.length&&a.isDirectory?[{label:c("LBL_GO"),disabled:!t.length,onclick:function(){return o("filemanager:navigate")}}]:[{label:c("LBL_OPEN"),disabled:!t.length,onclick:function(){return o("filemanager:open")}},{label:s("LBL_OPEN_WITH"),disabled:!t.length,onclick:function(){return o("filemanager:openWith")}}],d=[{label:c("LBL_COPY"),disabled:!l,onclick:function(){return o("filemanager:menu:copy")}},{label:c("LBL_CUT"),disabled:!l,onclick:function(){return o("filemanager:menu:cut")}}],n||d.push({label:c("LBL_PASTE"),disabled:!i.has(/^filemanager:/),onclick:function(){return o("filemanager:menu:paste")}}),[4,(v={file:a,isContextMenu:n},es(function(){var t,n;return ef(this,function(r){switch(r.label){case 0:if(!e.has("osjs/middleware"))return[2,[]];return[4,Promise.all(e.make("osjs/middleware").get("osjs/filemanager:menu:".concat("edit")).map(function(e){return e(v)}))];case 1:return n=r.sent().filter(function(e){var t;return null!=(t=Array)&&"u">typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}),[2,(t=[]).concat.apply(t,el(n))]}})})())];case 1:return p=h.sent(),m=[],!0!==e.config("filemanager.disableDownload",!1)&&m.push({label:c("LBL_DOWNLOAD"),disabled:!u,onclick:function(){return o("filemanager:menu:download")}}),[2,el(f).concat([{label:c("LBL_RENAME"),disabled:!l,onclick:function(){return o("filemanager:menu:rename")}},{label:c("LBL_DELETE"),disabled:!l,onclick:function(){return o("filemanager:menu:delete")}}],el(d),el(m),el(p))]}})})()},view:function(e){return[{label:c("LBL_REFRESH"),onclick:function(){return r.emit("filemanager:menu:refresh")}},{label:s("LBL_MINIMALISTIC"),checked:e.minimalistic,onclick:function(){return r.emit("filemanager:menu:toggleMinimalistic")}},{label:s("LBL_SHOW_DATE"),checked:t.settings.showDate,onclick:function(){return r.emit("filemanager:menu:showDate")}},{label:s("LBL_SHOW_HIDDEN_FILES"),checked:t.settings.showHiddenFiles,onclick:function(){return r.emit("filemanager:menu:showHidden")}}]},go:function(){return o.mountpoints(!0).map(function(e){return{label:e.label,icon:e.icon,onclick:function(){return r.emit("filemanager:navigate",{path:e.root})}}})}};return function(e,t){var n=e.name,r=e.ev,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return es(function(){var e,i;return ef(this,function(u){switch(u.label){case 0:if(!l[n])return[3,2];return e=a.show,i={},[4,l[n](t,o)];case 1:return e.apply(a,[(i.menu=u.sent(),i.position=o?r:r.target,i)]),[3,3];case 2:throw Error("Invalid menu: ".concat(n));case 3:return[2]}})})()}},eS=function(e,t,n){var o=e.make("osjs/theme").icon,i=e.make("osjs/locale").translate,a=function(e,t){return function(r){return n.emit("filemanager:menu",{ev:r,name:e},t)}},u=function(e,t){return n.emit("filemanager:navigate",{path:t})},c=function(e){var t=e.list,n=e.index;return!t.length||n<=0},s=function(e){var t=e.list,n=e.index;return!t.length||n===t.length-1};return function(e,t){var l=Y(e.fileview,t.fileview),f=Y(e.mountview,t.mountview);return r(D,{class:e.minimalistic?"osjs-filemanager-minimalistic":""},[r(F,{},[r(P,{onclick:a("file")},i("LBL_FILE")),r(P,{onclick:a("edit")},i("LBL_EDIT")),r(P,{onclick:a("view",e)},i("LBL_VIEW")),r(P,{onclick:a("go")},i("LBL_GO"))]),r(N,{},[r(T,{title:i("LBL_BACK"),icon:o("go-previous"),disabled:c(e.history),onclick:function(){return t.history.back()}}),r(T,{title:i("LBL_FORWARD"),icon:o("go-next"),disabled:s(e.history),onclick:function(){return t.history.forward()}}),r(T,{title:i("LBL_HOME"),icon:o("go-home"),onclick:function(){return n.emit("filemanager:home")}}),r(J,{value:e.path,box:{grow:1,shrink:1},onenter:u})]),r(z,{style:{flex:"1 1"}},[r(f),r(l)]),r(B,{},r("span",{},e.status))])}},eI=function(e,t){var n=e_(e,t),r=ey(e,t),o=eg(e),i=e.make("osjs/dnd").draggable,a={path:"",status:"",minimalistic:!1,history:{index:-1,list:[]},mountview:q({class:"osjs-gui-fill",columns:["Name"],hideColumns:!0,rows:o()}),fileview:q({columns:[],multiselect:!0,previousSelectedIndex:0})};return function(u,c){return function(e,t,n,r){var o,i=[].map,a=r&&r.children[0]||null,u=a&&function e(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:i.call(t.childNodes,function(t){return 3===t.nodeType?t.nodeValue:e(t)})}}(a),c=[],s=!0,l=h(e),f=function e(t,n,r){for(var o in r)"function"==typeof r[o]?function(e,o){r[e]=function(e){var i=o(e);return"function"==typeof i&&(i=i(v(t,l),r)),i&&i!==(n=v(t,l))&&!i.then&&m(l=function e(t,n,r){var o={};return t.length?(o[t[0]]=t.length>1?e(t.slice(1),n,r[t[0]]):n,h(r,o)):n}(t,h(n,i),l)),i}}(o,r[o]):e(t.concat(o),n[o]=h(n[o]),r[o]=h(r[o]));return r}([],l,h(t));return m(),f;function d(e){return"function"==typeof e?d(e(l,f)):null!=e?e:""}function p(){o=!o;var e=d(n);for(r&&!o&&(a=function e(t,n,r,o,i){if(o===r);else if(null==r||r.nodeName!==o.nodeName){var a=function e(t,n){var r="string"==typeof t||"number"==typeof t?document.createTextNode(t):(n=n||"svg"===t.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName),o=t.attributes;if(o){o.oncreate&&c.push(function(){o.oncreate(r)});for(var i=0;i<t.children.length;i++)r.appendChild(e(t.children[i]=d(t.children[i]),n));for(var a in o)y(r,a,o[a],null,n)}return r}(o,i);t.insertBefore(a,n),null!=r&&L(t,n,r),n=a}else if(null==r.nodeName)n.nodeValue=o;else{!function(e,t,n,r){for(var o in h(t,n))n[o]!==("value"===o||"checked"===o?e[o]:t[o])&&y(e,o,n[o],t[o],r);var i=s?n.oncreate:n.onupdate;i&&c.push(function(){i(e,t)})}(n,r.attributes,o.attributes,i=i||"svg"===o.nodeName);for(var u={},l={},f=[],p=r.children,m=o.children,v=0;v<p.length;v++){f[v]=n.childNodes[v];var _=g(p[v]);null!=_&&(u[_]=[f[v],p[v]])}for(var v=0,E=0;E<m.length;){var _=g(p[v]),R=g(m[E]=d(m[E]));if(l[_]){v++;continue}if(null!=R&&R===g(p[v+1])){null==_&&L(n,f[v],p[v]),v++;continue}if(null==R||s)null==_&&(e(n,f[v],p[v],m[E],i),E++),v++;else{var b=u[R]||[];_===R?(e(n,b[0],b[1],m[E],i),v++):b[0]?e(n,n.insertBefore(b[0],f[v]),b[1],m[E],i):e(n,f[v],null,m[E],i),l[R]=m[E],E++}}for(;v<p.length;)null==g(p[v])&&L(n,f[v],p[v]),v++;for(var v in u)l[v]||L(n,u[v][0],u[v][1])}return n}(r,a,u,u=e)),s=!1;c.length;)c.pop()()}function m(){o||(o=!0,setTimeout(p))}function h(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function v(e,t){for(var n=0;n<e.length;)t=t[e[n++]];return t}function g(e){return e?e.key:null}function _(e){return e.currentTarget.events[e.type](e)}function y(e,t,n,r,o){if("key"===t);else if("style"===t)if("string"==typeof n)e.style.cssText=n;else for(var i in"string"==typeof r&&(r=e.style.cssText=""),h(r,n)){var a=null==n||null==n[i]?"":n[i];"-"===i[0]?e.style.setProperty(i,a):e.style[i]=a}else"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?r||(r=e.events[t]):e.events={},e.events[t]=n,n?r||e.addEventListener(t,_):e.removeEventListener(t,_)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!o?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),(null==n||!1===n)&&e.removeAttribute(t)}function L(e,t,n){function r(){e.removeChild(function e(t,n){var r=n.attributes;if(r){for(var o=0;o<n.children.length;o++)e(t.childNodes[o],n.children[o]);r.ondestroy&&r.ondestroy(t)}return t}(t,n))}var o=n.attributes&&n.attributes.onremove;o?o(t,r):r()}}(a,{history:{clear:function(){return{index:-1,list:[]}},push:function(e){return function(t){var n=t.index,r=t.list,o=-1===n?[]:r,i=o[o.length-1]===e?o.length-1:o.push(e)-1;return{list:o,index:i}}},back:function(){return function(e){var t=e.index,n=e.list,r=Math.max(0,t-1);return c.emit("filemanager:navigate",n[r],!0),{index:r}}},forward:function(){return function(e){var t=e.index,n=e.list,r=Math.min(n.length-1,t+1);return c.emit("filemanager:navigate",n[r],!0),{index:r}}}},toggleMinimalistic:function(){return function(e){return{minimalistic:!e.minimalistic}}},setPath:function(e){return{path:e}},setStatus:function(e){return{status:e}},setMinimalistic:function(e){return{minimalistic:e}},setList:function(t){var i=t.list,a=t.path,u=t.selectFile;return function(t){var c=t.fileview,s=t.mountview,l=[];if(u){var f=i.findIndex(function(e){return e.filename===u});-1!==f&&(l=[f])}return{path:a,status:ev(e)(a,i),mountview:Object.assign({},s,{rows:o()}),fileview:Object.assign({},c,{selectedIndex:l,columns:n(),rows:r(i)})}}},mountview:V({select:function(e){var t=e.data;return c.emit("filemanager:navigate",{path:t.root})}}),fileview:V({select:function(e){var t=e.data;return c.emit("filemanager:select",t)},activate:function(e){var t=e.data;return(Array.isArray(t)?t:[t]).forEach(function(e){return c.emit("filemanager:".concat(e.isFile?"open":"navigate"),e)})},contextmenu:function(e){return c.emit("filemanager:contextmenu",e)},created:function(e){var t=e.el,n=e.data;n.isFile&&i(t,{data:n})}})},eS(e,t,c),u)}},eD=function(e,t){var n,r,o,i,a,u={currentFile:[],currentPath:void 0},c=eh(e,t),s=c.homePath,l=c.initialPath,f=e.make("osjs/locale").translatableFlat(t.metadata.title),d=t.createWindow({id:"FileManager",icon:(0,e.make("osjs/theme").icon)(t.metadata.icon),title:f,attributes:{mediaQueries:{small:"screen and (max-width: 400px)"}},dimension:Object.assign({width:400,height:400},e.config("filemanager.defaultWindowSize",{}))}),p=eI(e,t),m=eR(e,t,d),h=eb(e,t,d),v=eL(e,t,d,m,u),g=eE(e,u,v),_=function(e,n){return t.emit("filemanager:setting",e,n)};return d.once("render",function(){return d.focus()}).once("destroy",function(){return a=void 0}).once("render",function(){return v.readdir(l)}).once("destroy",function(){return t.destroy()}).on("drop",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(n=v).drop.apply(n,el(t))}).on("filemanager:title",function(e){return d.setTitle("".concat(f," - ").concat(e))}).on("filemanager:status",function(e){return a.setStatus(e)}).on("filemanager:menu",function(e,t){var n=t||u.currentFile;h(e,Array.isArray(n)?n:[n])}).on("filemanager:home",function(){return v.readdir(s,"clear")}).on("filemanager:navigate",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(r=v).readdir.apply(r,el(t))}).on("filemanager:select",function(e){return u.currentFile=e}).on("filemanager:select",function(t){return d.emit("filemanager:status",ev(e)(u.currentPath,Array.isArray(t)?t:[t]))}).on("filemanager:contextmenu",function(e){var t=e.ev,n=e.data;return h({ev:t,name:"edit"},n?Array.isArray(n)?n:[n]:[],!0)}).on("filemanager:readdir",function(e){return a.setList(e)}).on("filemanager:refresh",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(o=v).refresh.apply(o,el(t))}).on("filemanager:open",function(t){return Array.isArray(t)||(t=[t]),t.forEach(function(t){return e.open(t,{useDefault:!0})})}).on("filemanager:openWith",function(t){return Array.isArray(t)||(t=[t]),t.forEach(function(t){return e.open(t,{useDefault:!0,forceDialog:!0})})}).on("filemanager:historyPush",function(e){return a.history.push(e)}).on("filemanager:historyClear",function(){return a.history.clear()}).on("filemanager:menu:upload",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(i=v).upload.apply(i,el(t))}).on("filemanager:menu:mkdir",function(){return m("mkdir",v.action,u.currentPath)}).on("filemanager:menu:quit",function(){return t.destroy()}).on("filemanager:menu:refresh",function(){return v.refresh()}).on("filemanager:menu:toggleMinimalistic",function(){return a.toggleMinimalistic()}).on("filemanager:menu:showDate",function(){return _("showDate",!t.settings.showDate)}).on("filemanager:menu:showHidden",function(){return _("showHiddenFiles",!t.settings.showHiddenFiles)}).on("filemanager:menu:copy",function(e){return g.set(e)}).on("filemanager:menu:cut",function(e){return g.cut(e)}).on("filemanager:menu:paste",function(){return g.paste()}).on("filemanager:menu:rename",function(e){return m("rename",v.action,e)}).on("filemanager:menu:delete",function(e){return m("delete",v.action,e)}).on("filemanager:menu:download",function(e){return v.download(e)}).render(function(e,t){return a=p(e,t)})};OSjs.make("osjs/packages").register("FileManager",function(e,t,n,r){var o=e.make("osjs/application",{args:t,metadata:r,options:Object.assign({},n,{settings:{showHiddenFiles:!1,showDate:!1}})}),i=eD(e,o),a=function(e){o.settings=Object.assign({},o.settings,e),i.emit("filemanager:refresh")};o.on("osjs:filemanager:remote",a),o.on("filemanager:setting",function(t,n){var r;a((t in(r={})?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r)),o.saveSettings().then(function(){return e.broadcast("osjs:filemanager:remote",o.settings)}).catch(function(e){return console.warn(e)})});var u=function(e){e.pid!==o.pid&&String(o.args.path.path).replace(/\/$/,"")===String(e.path).replace(/\/$/,"")&&i.emit("filemanager:refresh")};return e.on("osjs/vfs:directoryChanged",u),o.on("destroy",function(){return e.off("osjs/vfs:directoryChanged",u)}),o})})(),e.r(t),t})());
//# sourceMappingURL=main.js.map